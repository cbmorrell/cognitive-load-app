<h1>STROOP Test</h1>
<h2>This is a test displaying the Stroop effect. Please select the button whose text describes the font color of the prompt 
    (i.e., if the prompt's font colour is blue, select the button that says "blue"). Your score will increase and decrease
depending on if the correct button was pressed.</h2>
<div>
    <p id="prompt">Text</p>
    <p id="score">Text</p>
    <button id="left-button" onclick="leftButtonClicked()">Text</button>
    <button id="right-button" onclick="rightButtonClicked()">Text</button>
</div>

<script>
    /*
    Display text that either says "Blue" or "Red". 
    The colour of the font is randomly chosen, so it does not always match up with the text.
    The users should select the button whose text describes the color of the prompt at the top of the screen.
    */
    const colors = ['blue', 'red'];
    let score = 0;  // score count

    setAllElements();
    
    function setTextElementProperties(id, text, color) {
        const getRandomColorIndex = () => {
            return Math.floor(Math.random() * colors.length);
        }
        if (text === undefined) {
            const random_word_idx = getRandomColorIndex(); // get random integer to select word to display
            text = colors[random_word_idx];
        }

        if (color === undefined) {
            const random_font_color_idx = getRandomColorIndex();   // get random integer to select font colour
            color = colors[random_font_color_idx];
        }

        document.getElementById(id).innerHTML = text.toUpperCase();
        document.getElementById(id).style.color = color;

        return [text, color];
    }

    function setAllElements() {
        setTextElementProperties("score", score.toString());

        // Set prompt and left button randomly
        prompt_properties = setTextElementProperties("prompt");
        left_button_properties = setTextElementProperties("left-button");
    
        // Set right button based on left button properties
        right_button_text = left_button_properties[0] === colors[0] ? colors[1].toUpperCase() : colors[0].toUpperCase();   // set text opposite of left button
        right_button_color = left_button_properties[1] === colors[0] ? colors[1] : colors[0];     // set color opposite of left button
        setTextElementProperties("right-button", right_button_text, right_button_color);
    
        // Determine the correct button that the user should press
        correctButtonId = right_button_text === prompt_properties[1] ? 'right-button' : 'left-button';

        return correctButtonId;
    }


    function correctButtonWasClicked(buttonId) {
        promptColor = document.getElementById("prompt").style.color;
        button_text = document.getElementById(buttonId).innerHTML.toLowerCase();
        return promptColor === button_text;
    }
    

    function leftButtonClicked() {
        if (correctButtonWasClicked("left-button")) {
            score++;
        } else {
            score--;
        }
        setAllElements();   // reset elements
    }

    function rightButtonClicked() {
        if (correctButtonWasClicked("right-button")) {
            score++;
        } else {
            score--;
        }

        setAllElements();   // reset elements
    }



</script>
